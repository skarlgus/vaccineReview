<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vaccineReview.login.mapper.loginMapper">

    <!--
	작  성  자 : 남기현
	작  성  일 : 2021.04.24
	내      용 : 로그인
	-->
    <select id="getUserAccount" resultType="com.vaccineReview.login.vo.loginVO">
        SELECT EMAIL as userId
             , PASSWORD as userPw
             , NAME as userLastName
             , ROLE as userAuth
          FROM MEMBER
         WHERE EMAIL = #{userId}
    </select>

    <!--
	작  성  자 : 남기현
	작  성  일 : 2021.04.25
	내      용 : 회원가입 중복체크
	-->
    <select id="checkUser" resultType="Int">
        SELECT COUNT(1)
          FROM MEMBER
         WHERE EMAIL = #{userId}
           AND ROLE = '회원가입'
    </select>

    <!--
	작  성  자 : 남기현
	작  성  일 : 2021.04.24
	내      용 : 회원가입
	-->
    <insert id="saveUser" parameterType="com.vaccineReview.login.vo.loginVO">
        INSERT INTO MEMBER (
                    EMAIL
                  , NAME
                  , PASSWORD
                  , ROLE
           ) VALUES (
                    #{userId}
                  , #{userFirstName} || #{userLastName}
                  , #{userPw}
                  , #{userAuth}
                  )
    </insert>

</mapper>